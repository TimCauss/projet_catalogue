<?php
require_once "connect.php";

$query = "SELECT * FROM pokemon ORDER BY p_id DESC LIMIT 15";
$result = $db->query($query);
$rows = $result->fetchAll(PDO::FETCH_ASSOC)


?>


<section class="carousel-container">
    <div class="slider-header">
        <div class="slider-btn slider-header-left">
            <svg width="23" height="22" class="slider-icon" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.4936 5.81359C12.8397 5.81359 14.1031 6.339 15.0592 7.29002C15.8236 8.05435 16.306 9.01969 16.4719 10.0631H22.0625C21.8758 7.52893 20.8088 5.17033 18.9964 3.35518C16.9899 1.35148 14.3259 0.248894 11.4936 0.248894C8.65904 0.248894 5.995 1.35379 3.98853 3.35795C2.17661 5.17033 1.10683 7.52893 0.920135 10.0631H6.5084C6.89426 7.65924 8.98113 5.81359 11.4936 5.81359ZM9.04721 8.41155C8.39657 9.06682 8.03243 9.93281 8.03243 10.8579C8.03243 11.7785 8.39657 12.6468 9.04721 13.2997C9.70017 13.9527 10.5662 14.3122 11.4913 14.3122C13.3961 14.3122 14.9456 12.7604 14.9456 10.8556C14.9456 9.9305 14.5837 9.06451 13.9354 8.40924C13.2801 7.75629 12.4141 7.39908 11.4913 7.39908C10.5685 7.40139 9.70248 7.7586 9.04721 8.41155ZM15.0569 14.4213C14.1031 15.3723 12.8374 15.8977 11.4913 15.8977C10.1401 15.8977 8.8767 15.3746 7.92568 14.4213C7.16413 13.6569 6.67429 12.6939 6.5084 11.6482H0.920135C1.10683 14.1823 2.17383 16.5433 3.98622 18.3579C5.99269 20.3621 8.65673 21.467 11.4913 21.467C17.0726 21.467 21.6484 17.1278 22.0578 11.6482H16.4719C16.306 12.6939 15.8212 13.6592 15.0569 14.4213Z" />
            </svg>
            Derniers Ajouts
        </div>
        <a href="./pokedex.php">
            <div class="slider-btn slider-header-right">
                <svg width="23" height="22" class="slider-icon" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.4936 5.81359C12.8397 5.81359 14.1031 6.339 15.0592 7.29002C15.8236 8.05435 16.306 9.01969 16.4719 10.0631H22.0625C21.8758 7.52893 20.8088 5.17033 18.9964 3.35518C16.9899 1.35148 14.3259 0.248894 11.4936 0.248894C8.65904 0.248894 5.995 1.35379 3.98853 3.35795C2.17661 5.17033 1.10683 7.52893 0.920135 10.0631H6.5084C6.89426 7.65924 8.98113 5.81359 11.4936 5.81359ZM9.04721 8.41155C8.39657 9.06682 8.03243 9.93281 8.03243 10.8579C8.03243 11.7785 8.39657 12.6468 9.04721 13.2997C9.70017 13.9527 10.5662 14.3122 11.4913 14.3122C13.3961 14.3122 14.9456 12.7604 14.9456 10.8556C14.9456 9.9305 14.5837 9.06451 13.9354 8.40924C13.2801 7.75629 12.4141 7.39908 11.4913 7.39908C10.5685 7.40139 9.70248 7.7586 9.04721 8.41155ZM15.0569 14.4213C14.1031 15.3723 12.8374 15.8977 11.4913 15.8977C10.1401 15.8977 8.8767 15.3746 7.92568 14.4213C7.16413 13.6569 6.67429 12.6939 6.5084 11.6482H0.920135C1.10683 14.1823 2.17383 16.5433 3.98622 18.3579C5.99269 20.3621 8.65673 21.467 11.4913 21.467C17.0726 21.467 21.6484 17.1278 22.0578 11.6482H16.4719C16.306 12.6939 15.8212 13.6592 15.0569 14.4213Z" />
                </svg>
                DÃ©couvrir plus...
                <svg width="22" height="22" class="slider-icon" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.33333 10.8333V9.16667C3.33333 8.94097 3.4158 8.74566 3.58073 8.58073C3.74566 8.4158 3.94097 8.33333 4.16667 8.33333H10.7031L8.24219 5.8724C8.07726 5.70747 7.99479 5.51215 7.99479 5.28646C7.99479 5.06076 8.07726 4.86545 8.24219 4.70052L9.42708 3.51562C9.58333 3.35938 9.77865 3.28125 10.013 3.28125C10.2474 3.28125 10.4427 3.35938 10.599 3.51562L15.3125 8.22917L16.4974 9.41406C16.6536 9.57031 16.7318 9.76562 16.7318 10C16.7318 10.2344 16.6536 10.4297 16.4974 10.5859L15.3125 11.7708L10.599 16.4844C10.4427 16.6406 10.2474 16.7188 10.013 16.7188C9.77865 16.7188 9.58333 16.6406 9.42708 16.4844L8.24219 15.2995C8.08594 15.1432 8.00781 14.9479 8.00781 14.7135C8.00781 14.4792 8.08594 14.2839 8.24219 14.1276L10.7031 11.6667H4.16667C3.94097 11.6667 3.74566 11.5842 3.58073 11.4193C3.4158 11.2543 3.33333 11.059 3.33333 10.8333ZM0 10C0 11.8142 0.447048 13.4874 1.34115 15.0195C2.23524 16.5516 3.44835 17.7648 4.98047 18.6589C6.51259 19.553 8.18576 20 10 20C11.8142 20 13.4874 19.553 15.0195 18.6589C16.5516 17.7648 17.7648 16.5516 18.6589 15.0195C19.553 13.4874 20 11.8142 20 10C20 8.18576 19.553 6.51259 18.6589 4.98047C17.7648 3.44835 16.5516 2.23524 15.0195 1.34115C13.4874 0.447049 11.8142 0 10 0C8.18576 0 6.51259 0.447049 4.98047 1.34115C3.44835 2.23524 2.23524 3.44835 1.34115 4.98047C0.447048 6.51259 0 8.18576 0 10Z" />
                </svg>
            </div>
        </a>
    </div>

    <div class="carousel" data-flickity='{ "wrapAround": true, "adaptiveHeight": true }'>

        <?php
        foreach ($rows as $row) {
            $numero = $row['numero'];
            $nom = $row['nom'];
            $type = $row['p_type'];
            $type2 = $row['p_type-2'];
            echo '<div class="carousel-cell">';
            echo ' <div class="carousel-poke-nbr">' . $numero . '</div>';
            echo '<img class="carousel-img" src="./uploads/' . $nom . '.png" alt="Image d\'Aspicot">';
            echo ' <div class="carousel-footer">';
            echo '<div class="crsl-ft-r1">
                    <h5>' . $nom . ' <span class="carousel-footer-nbr">' . $numero . '</span></h5>
                </div>';
            echo '<div class="crsl-ft-r2">';
            echo ' <div class="crsl-ft-type">Type</div>';
            echo ' <div>
                        <div class="type-label type-colors-' . $type . '">' . $type . '</div>
                        <div class="type-label type-colors-' . $type2 . '">' . $type2 . '</div>
                    </div>
                </div>
            </div>
        </div>';
        }
        ?>
    </div>
</section>